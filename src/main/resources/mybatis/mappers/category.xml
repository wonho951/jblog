<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">


<mapper namespace="category">


	<!-- 리스트 가져오기 -->
	<select id="categoryList" parameterType = "String" resultType="CategoryVo">
		<![CDATA[
			select cateNo   
			       ,id
			       ,cateName
			       ,description
			       ,regDate
			from category
			where id = #{id}
			order by cateNo desc
		]]>
	</select>


	<!-- 리스트 가져오기 ajax로 뿌리기 -->
	<select id="countList" parameterType = "String" resultType="CategoryVo">
		<![CDATA[
			select c.id,
			       c.cateno,
			       c.catename,
			       c.description,
			       c.regdate regDate,
			       (select count(p.cateno)
			        from post
			        ) as count
			from category c LEFT outer join post p
			on p.cateno = c.cateno
			where c.id = 'ctct'
			order by c.cateno desc
		]]>
	</select>
	
	
	
	<!-- 정보 받아서 카테고리 생성 -->
	<insert id="insert" parameterType="CategoryVo">
		<![CDATA[
			insert into category
			values(  seq_category_no.nextval
					,#{id}
					,#{cateName}
					,#{description}
					,sysdate
				   )
		]]>
	</insert>

	

</mapper>